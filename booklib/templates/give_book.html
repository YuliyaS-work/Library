{% extends 'basic.html'%}
{% load static %}

{% block title %}Выдача книги{% endblock %}

{% block content %}
<div class="forms-wrapper-give">
<div class="form-container-give">
<form  action="#toast" method="POST">
    {% csrf_token %}
    <div class="form-row-person">
    <label for="person">Читатель</label>
    <select id="person" name="person">
        {% for person in persons %}
        <option value="{{ person.id }}">{{ person }}</option>
        {% endfor %}
    </select>
    </div>

    {% for i in "12345" %}
    <div class="form-row-book">
        <label for="book_{{ i }}">Книга{{ i }}</label>
        <select id="book_{{ i }}" name="book_{{ i }}" class="book-select">
            <option value="">--Выберите книгу--</option>
            {% for book in books %}
            <option value="{{ book.id }}">{{ book }}</option>
            {% endfor %}
        </select>

        <label for="bookobj_{{ i }}">Регистрационный номер</label>
        <select id="bookobj_{{ i }}" name="bookobj_{{ i }}" disabled>
            <option value="">--номер--</option>
        </select>
    </div>
    {% endfor %}

    <div class="form-row small-input">
    <label for="quantity_books">Количество книг</label>
    <input id="quantity_books" name="quantity_books" value="" readonly>
    </div>

    <div class="form-row small-input">
    <label for="discount">Скидка</label>
    <input id="discount" name="discount" value="" readonly>
    </div>

    <div class="form-row small-input">
    <label for="pre_return_date">Предварительная дата возврата</label>
    <input type="date" id="pre_return_date" name="pre_return_date" value="{{ pre_return_date }}" readonly>
    </div>

    <div class="form-row small-input">
    <label for="pre_cost" >Предварительная стоимость</label>
    <input type="number" id="pre_cost" name="pre_cost" value="" step="any" readonly>
    </div>

    <input type="submit" value="Зарегистрировать" name="give_book" class="button_dr">

</form>
<div id="toast" class="toast">Выдача зарегистрирована</div>
</div>

<div class="person-container">
    <label for="person_data">ФИО читателя</label>
    <select id="person_data" name="person_data">
        <option value="">--Выберите читателя--</option>
        {% for person in persons_all %}
        <option value="{{person.id}}">{{ person.last_name }} {{ person.first_name }} {{ person.surname }}</option>
        {% endfor %}
    </select>
    <div id="person_info"></div>
</div>
</div>

<script src="{% static 'js/formO.js' %}" defer></script>
<script> const getBookObjUrl = "{% url 'get_bookobj' %}"; </script>

<script src="{% static 'js/person_data.js' %}" defer></script>
<script>const getDataUrl = "{% url 'get_data' %}";</script>

{% endblock %}